machine:
  services:
    - docker

dependencies:
  override:
    - docker info
    - docker run --name cassandra -d -p 7000:7000 -p 9042:9042 cassandra:3.7
  post:
    - docker run --link cassandra:cassandra -v $PWD/test/config/cassandra:/config --rm cassandra:3.7 /config/wait-for-cassandra.sh cassandra cqlsh -f /config/commands.cql cassandra

test:
  pre:
    - docker start cassandra
  override:
    - go test -v .
